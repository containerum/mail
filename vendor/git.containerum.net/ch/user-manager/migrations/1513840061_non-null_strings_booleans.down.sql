-- not replacing empty strings or booleans back to NULL

ALTER TABLE users
  ALTER COLUMN login DROP NOT NULL,
  ALTER COLUMN password_hash DROP NOT NULL,
  ALTER COLUMN salt DROP NOT NULL;

ALTER TABLE accounts
  ALTER COLUMN user_id DROP NOT NULL,
  ALTER COLUMN google DROP NOT NULL,
  ALTER COLUMN facebook DROP NOT NULL,
  ALTER COLUMN github DROP NOT NULL;

ALTER TABLE links
  ALTER COLUMN user_id DROP NOT NULL,
  ALTER COLUMN type DROP NOT NULL,
  ALTER COLUMN is_active DROP NOT NULL;

ALTER TABLE profiles
  ALTER COLUMN user_id DROP NOT NULL,
  ALTER COLUMN referral DROP NOT NULL,
  ALTER COLUMN access DROP NOT NULL,
  ALTER COLUMN data DROP NOT NULL,
  ALTER COLUMN data DROP DEFAULT;

ALTER TABLE tokens
  ALTER COLUMN user_id DROP NOT NULL,
  ALTER COLUMN is_active DROP NOT NULL,
  ALTER COLUMN user_id DROP NOT NULL;